<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head',{title:"Crear Producto"}) %>

    <body>
        <main class="create">
            <%- include('../partials/header') %>

                <!-- Titulo -->
                <h1 class="text-center pt-5 pb-5">Creando un producto nuevo </h1>

                <!-- Comienzo del Formulario -->
                <form action="/admin/crear" method="POST" enctype="multipart/form-data">

                    <!-- Contenedor de imagenes y Principales -->
                    <div class="container">
                        <div class="row justify-content-between align-items-center">

                            <!-- Principales -->
                            <div class="col col-lg-4 col-md-12 col-sm-12">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" name="Titulo"
                                        placeholder="Nombre del producto" id="titulo"
                                        value="<%= locals.old && old.Titulo ? old.Titulo : null %> "
                                        placeholder="name@example.com">
                                    <label for="titulo">Nombre del producto</label>
                                    <p class="span text-danger" id="tituloError">
                                        <%= locals.errors && errors.Titulo ? errors.Titulo.msg : null %>
                                    </p>
                                </div>
                                <select style="padding: 17px; margin-bottom: 16px" class="form-select" name="Marca" id="marcas" floatingSelect"
                                aria-label="Floating label select example">
                                <option hidden value="">Selecciona una marca</option>
                                <% marcas.forEach(marca=> { %>

                                    <option value="<%- marca.id %>"><%- marca.nombre  %></option>

                                    <% }); %>
                                    <p class="span text-danger" id="marcaError">
                                        <%= locals.errors && errors.marca ? errors.marca.msg : null %>
                                    </p>

                                        
                            </select>
                                <div class="form-floating mb-3">
                                    <input class="form-control" type="number" name="Precio"
                                        placeholder="Precio del producto" id="precio"
                                        value="<%= locals.old && old.Precio? old.Precio: null%>">
                                    <label class="form-label" for="price">Precio del producto</label>
                                    <p class="span text-danger" id="precioError">
                                        <%= locals.errors && errors.Precio ? errors.Precio.msg : null %>
                                    </p>
                                </div>
                                <div class="form-floating mb-3">
                                    <input class="form-control" type="number" name="Descuento"
                                        placeholder="Descuento del producto" id="descuento"
                                        value="<%= locals.old && old.Descuento ? old.Descuento : 0%>">
                                    <label class="form-label" for="discount">Descuento del producto</label>
                                    <p class="span text-danger" id="descuentoError">
                                        <%= locals.errors && errors.Descuento ? errors.Descuento.msg : null %>
                                    </p>
                                </div>
                                <div class="form-floating mb-3">
                                    <input class="form-control" type="number" name="Stock"
                                        placeholder="Stock con el que cuenta el producto" id="stock"
                                        value="<%= locals.old && old.Stock ? old.Stock : null%>">
                                    <label class="form-label" for="stock">Stock con el que cuenta el producto</label>
                                    <p class="span text-danger" id="stockError">
                                        <%= locals.errors && errors.Stock ? errors.Stock.msg : null %>
                                    </p>
                                </div>
                            </div>

                            <!-- Imagenes!  -->

                            <div class="col col-lg-7 col-md-12 col-sm-12">

                                <section class="img-product">

                                    <div class="container">
                                        <div class="row">

                                            <!-- Imagen 1 -->

                                            <div class="col col-5">
                                                <label class="form-label" for="imagenes">
                                                    <!-- <img id="img-preview" class="img-fluid img-thumbnail imagen-height rounded" src="/img/default-image.png" alt=""> -->
                                                    <div class="imgHover">
                                                        <p class="text-center">Selecionar Imagen</p>
                                                    </div>
                                                </label>
                                                <div class="form-admin__box activo">
                                                    <input class="form-input" id="imagen" type="file" name="Imagenes"
                                                        placeholder="Imagen del Producto" accept="img/*">

                                                </div>
                                            </div>

                                            <!-- Columnas -->

                                        </div>
                                        <p class="span text-danger" id="imgError">
                                            <%= locals.errors && errors.imagen ? errors.imagen.msg : null %>
                                        </p>
                                    </div>

                                </section>
                            </div>

                            <!-- Fin del contenido principal -->

                        </div>
                    </div>

                    <div class="container">
                        <div class="row">


                            <!-- Selects  -->
                            <div class="container m-3">
                                <div class="row justify-content-around align-items-center">
                                    <div class="col col-4">
                                        <h3 class="text-center">Categoria</h3>
                                        <select class="form-select" name="Categoria" id="categorias" floatingSelect"
                                            aria-label="Floating label select example">
                                            <option hidden value="">Selecciona una opcion</option>
                                            <% categorias.forEach(categoria=> { %>

                                                <option value="<%- categoria.id %>"><%- categoria.nombre  %></option>

                                                <% }); %>

                                                    
                                        </select>
                                        <p class="span text-danger" id="categoriaError">
                                            <%= locals.errors && errors.Categoria ? errors.Categoria.msg : null %>
                                        </p>
                                    </div>
                                    <div class="container m-3">
                                        <div class="row justify-content-around align-items-center">
                                            <div class="col col-4">
                                                <h3 class="text-center">SubCategorias</h3>
                                                <select class="form-select" name="Subcategoria" id="subcategorias" floatingSelect"
                                                    aria-label="Floating label select example">
                                                    <% locals.errors && errors.subCategoria ? errors.Categoria.msg : null %>
                                                        <option hidden value="">Selecciona una opcion</option>
                                                        <% subCategorias.forEach(subCategorias=> { %>

                                                            <option value="<%- subCategorias.id %>"><%- subCategorias.nombre  %></option>
            
                                                            <% }); %>
                                                </select>
                                                <p class="span text-danger" id="subcategoriaError">
                                                    <%= locals.errors && errors.subCategoria ? errors.subCategoria.msg :
                                                        null %>
                                                </p>
                                            </div>

                                        </div>
                                    </div>


                                    <div class="container m-3">
                                        <div class="row">
                                            <div class="col col-12">
                                                <div class="form-floating">
                                                    <textarea name="Descripcion" id="descripcion" cols="300" rows="300"
                                                        class="form-control" placeholder="Leave a comment here"
                                                        style="resize: none;"><%= locals.old && old.descripcion ? old.descripcion : null%></textarea>
                                                    <label for="description">Descripcion del producto</label>
                                                    <p class="span text-danger" id="descripcionError">
                                                        <%= locals.errors && errors.Descripcion ? errors.Descripcion.msg
                                                            : null %>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>

                            <!-- Button -->

                            <div class="create-button text-center mt-5 pb-5">
                                <button class="btn btn-primary" id="btn-submit" type="submit">Crear producto</button>
                            </div>
                </form>
        </main>
        <script src="/javascripts/imagenes.js"></script>
        <script src="/javascripts/validacionProductos.js"></script>
    </body>

</html>